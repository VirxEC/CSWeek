<!DOCTYPE html>
<html lang="en-us">
<head>
  <title>CSWeek</title>
  <link rel="icon" href="logo.png">
  <link rel="stylesheet" type="text/css" href="index.css">
</head>
<body>
  <nav id="nav">
    <a href="">Home</a>
    <a href="/CalcPlus/SiteDiscord/">Contact Discord</a>
  </nav>
  <p class="console"></p>
  <br>
  <h1>The CSWeek Webpage!</h1>
  <h2>By South Windsor High School CS Club</h2>
  <h3>Currently under construction - please check back soon!</h3>
  <h4 id="sitetest">This is a test, please don't hurt it!</h4>
  <p id="OwO"></p>
  <p id="UwU"></p>
  <button id="roulettebruh">Put in an input value from 0-1000, then click me!</button>
  <input id="input" type="number" width="20px">
  <span id="number"></span><br>
  <button id="bonus">Get a bonus for 1 OwO</button>
  <br><br>
  <button id="reset">Reset everything</button>
  <script>
    var c = document.querySelector(".console");
    console.log = (...args) => args.forEach(m => {
      c.appendChild(document.createTextNode(`\n ${m}`));
    });
    console.warn = (...args) => args.forEach(e => {
      const s = document.createElement("span");
        s.textContent = "\n" + e;
        s.style.color = "rgb(205, 205, 0)";
        c.appendChild(s);
    });
    console.error = (...args) => args.forEach(e => {
      const s = document.createElement("span");
        s.textContent = "\n" + e;
        s.style.color = "red";
        c.appendChild(s);
    });
    window.onerror=(e,s,l,c)=>console.error(`${e} at: ${s} : ${l}:${c}`);

    document.getElementById("sitetest").addEventListener("click", function() {
      var test = confirm("Don't tell anyone about this secret,\nOK?");
      if (test) alert("Thanks!");
      else window.location.replace("https://www.w3schools.com/");
    });

    var OwO = localStorage.getItem("OwO"), UwU = localStorage.getItem("UwU"), bonus = (localStorage.getItem("bonus") == 'true'), num = document.getElementById("input").value;
    if (OwO != null) {
      OwO = parseInt(OwO);
      if (OwO != 0) document.getElementById("OwO").textContent = "OwO ("+OwO+" times)";
    } else OwO = 0;
    if (UwU != null) {
      UwU = parseInt(UwU);
      if (UwU != 0) document.getElementById("UwU").testContent = "UwU ("+UwU+" times)";
    } else UwU = 0;
    
    document.getElementById("roulettebruh").addEventListener("click", function() {
      var rangen = Math.floor(Math.random() * 1001);
      if(num == rangen || (bonus == true && (1000 - num) == rangen)){
        OwO++;
        document.getElementById("OwO").textContent = "OwO ("+OwO+" times)";
      } else {
        UwU++;
        document.getElementById("UwU").textContent = "UwU ("+UwU+" times)";
      }
      
      Number.prototype.between = function(a, b, inclusive) {
        var min = Math.min(a, b), max = Math.max(a, b);
        return inclusive ? this >= min && this <= max : this > min && this < max;
      }
      
      var onum = document.getElementById("number");
      onum.textContent = rangen;
      if (rangen.between(num-10, num+10, true)) onum.style.color = "rgb(0, 255, 0)";
      else if (rangen.between(num-100, num+100, true)) onum.style.color = "rgb(255, 255, 0)";
      else onum.style.color = "rgb(255, 0, 0)";
    });
    
    document.getElementById("bonus").addEventListener("click", function() {
      if (OwO >= 1 && bonus == false) {
        OwO--;
        if (OwO == 0) document.getElementById("OwO").textContent = "";
        else document.getElementById("OwO").textContent = "OwO ("+OwO+" times)";
        bonus = true;
      } else if (bonus) alert("You already have this bonus!");
      else alert("Not enough OwO's!");
    });
    
    document.getElementById("reset").addEventListener("click", function() {
      localStorage.setItem("OwO", 0);
      localStorage.setItem("UwU", 0);
      localStorage.setItem("bonus", false);
      window.location.reload();
    });
    
    window.addEventListener("beforeunload", function(){
      localStorage.setItem("OwO", OwO.toString());
      localStorage.setItem("UwU", UwU.toString());
      localStorage.setItem("bonus", bonus.toString());
    });
  </script>
</body>
</html>
